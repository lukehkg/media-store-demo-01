# Demo Configuration - ECS with EC2 Spot Instances
# Copy this file to terraform.tfvars and update with your values

aws_region   = "eu-west-1"
project_name = "demo-media01"
environment  = "demo"

# AWS Account ID (required for ECR)
aws_account_id = "<your-12-digit-aws-account-id>"

# VPC Configuration (public and private subnets for ECS)
vpc_cidr            = "10.0.0.0/16"
availability_zones   = ["eu-west-1a", "eu-west-1b"]
public_subnet_cidrs  = ["10.0.1.0/28", "10.0.2.0/28"]
private_subnet_cidrs = ["10.0.10.0/28", "10.0.20.0/28"]
enable_nat_gateway  = true

# ECS Configuration
ecs_cluster_name = "demo-media01-cluster"

# Docker Images (will be set by CI/CD or manually)
backend_image        = ""
frontend_admin_image = ""
frontend_client_image = ""

# Task Configuration
backend_cpu    = 512
backend_memory = 1024
frontend_cpu   = 256
frontend_memory = 512

backend_desired_count        = 1
frontend_admin_desired_count = 1
frontend_client_desired_count = 1

# Ports
backend_port   = 8000
frontend_port  = 3000

# Logging
log_retention_days = 3

# Auto Scaling (ECS Services)
enable_auto_scaling      = true
min_capacity            = 1
max_capacity            = 3
target_cpu_utilization   = 70
target_memory_utilization = 80

# EC2 Instance Configuration (for ECS cluster)
ec2_instance_type = "t3.small"  # EC2 instance type for ECS cluster
ec2_key_name      = "your-key-pair-name"  # REQUIRED: Create EC2 Key Pair first
ec2_volume_size   = 30

# Auto Scaling Group Configuration (EC2 instances)
desired_capacity     = 1  # Desired number of EC2 instances
on_demand_percentage = 0  # 0 = all Spot instances (maximum savings), 100 = all on-demand

# Spot Instance Pricing (optional)
# Leave empty to use on-demand price as maximum
spot_max_price_per_hour = ""  # Empty = use on-demand price as max

# Domain and Certificate (optional)
domain_name    = ""
certificate_arn = ""

# Security
allowed_cidr_blocks = ["0.0.0.0/0"]
